"use strict";var pages=document.getElementById("sub-container").getElementsByTagName("article"),parent=document.getElementById("main-container"),child=document.getElementById("sub-container"),pageCounter=document.getElementById("pcount"),currentPage=0,pageWidth=window.innerWidth,isScrolling=!1,whiteSpace=child.offsetWidth-child.clientWidth,leftControll=document.createElement("div"),rigthControll=document.createElement("div"),innerLeft=document.createElement("div"),innerRigth=document.createElement("div");function preventDefault(e){e=e||window.event}function movePage(e){isScrolling||(isScrolling=!0,animatePages(pages,e,function(){isScrolling=!1}))}function preventDefaultForScrollKeys(e){switch(e.keyCode){case 37:movePage(!1);break;case 39:movePage(!0);break;case 38:case 40:return preventDefault(e),!1}}function setScbPage(e){currentPage=e<=0&&e<pages.length?e:currentPage,window.scbCurrentPage=currentPage;for(var t=0;t<=pages.length-1;t++)pages[t].style.left=t<=e?"0px":pageWidth+"px",console.log(pages[t])}function animatePages(e,t,n){var i,a=1,l=pageWidth;function r(){t?l-80<1?(n(),e[currentPage+1].style.left="0px",currentPage+=1,window.scbCurrentPage=currentPage):(e[currentPage+1].style.display="block",l-=80,e[currentPage+1].style.left=l+"px",requestAnimationFrame(r)):pageWidth<=a?(n(),e[currentPage].style.display="none",currentPage-=1,window.scbCurrentPage=currentPage):(a+=80,e[currentPage].style.left=a+"px",requestAnimationFrame(r))}i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.requestAnimationFrame=i,0==currentPage&&t?requestAnimationFrame(r):currentPage!=e.length-1||t?0<currentPage&&currentPage<e.length-1?requestAnimationFrame(r):n():requestAnimationFrame(r)}function swipedetect(e,t){var n,i,a,l,r,o,s=e,c=t||function(e){};s.addEventListener("touchstart",function(e){var t=e.changedTouches[0];n="none",i=t.pageX,a=t.pageY,o=(new Date).getTime()},!1),s.addEventListener("touchmove",function(e){1==e.changedTouches.length&&10<Math.abs(e.changedTouches[0].pageX-i)&&e.preventDefault()}),s.addEventListener("touchend",function(e){var t=e.changedTouches[0];l=t.pageX-i,r=t.pageY-a,(new Date).getTime()-o<=2e3&&(60<=Math.abs(l)&&Math.abs(r)<=1e3?n=l<0?"left":"right":60<=Math.abs(r)&&Math.abs(l)<=1e3&&(n=r<0?"up":"down")),c(n),e.preventDefault()},!1)}window.scbNumPages=pages.length,window.scbCurrentPage=0,leftControll.classList.add("scb-left"),innerLeft.id="lb",innerLeft.classList.add("scb-arrows"),innerLeft.classList.add("left"),leftControll.appendChild(innerLeft),rigthControll.classList.add("scb-right"),innerRigth.id="rb",innerRigth.classList.add("scb-arrows"),innerRigth.classList.add("right"),rigthControll.appendChild(innerRigth),child.appendChild(leftControll),child.appendChild(rigthControll),child.style.paddingRight=whiteSpace+"px",child.setAttribute("style","width:"+(child.clientWidth+whiteSpace)+"px;"),window.onresize=function(){pageWidth=window.innerWidth;for(var e=0;e<pages.length;e++)0<pages[e].offsetLeft&&(pages[e].style.left=pageWidth+"px")},window.setScbPage=setScbPage;var confirmSwipe=0;swipedetect(parent,function(e){switch(e){case"right":1==confirmSwipe?(movePage(!1),confirmSwipe=0,leftControll.classList.add("scb-l-called"),setTimeout(function(){rigthControll.style.visibility="hidden",leftControll.style.visibility="hidden",leftControll.classList.remove("scb-l-called")},500)):(rigthControll.style.visibility="visible",leftControll.style.visibility="visible",confirmSwipe++);break;case"left":1==confirmSwipe?(movePage(!0),confirmSwipe=0,rigthControll.classList.add("scb-l-called"),setTimeout(function(){rigthControll.style.visibility="hidden",leftControll.style.visibility="hidden",rigthControll.classList.remove("scb-l-called")},500)):(rigthControll.style.visibility="visible",leftControll.style.visibility="visible",confirmSwipe++)}}),window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,document.onkeydown=preventDefaultForScrollKeys;var before=document.getElementById("lb"),next=document.getElementById("rb");next.addEventListener("click",function(){movePage(!0)}),before.addEventListener("click",function(){movePage(!1)});