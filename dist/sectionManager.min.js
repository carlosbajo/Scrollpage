"use strict";var pages=document.getElementById("sub-container").getElementsByTagName("article"),parent=document.getElementById("main-container"),child=document.getElementById("sub-container"),pageCounter=document.getElementById("pcount"),currentPage=0,pageWidth=window.innerWidth,isScrolling=!1,whiteSpace=child.offsetWidth-child.clientWidth,leftControll=document.createElement("div"),rigthControll=document.createElement("div"),innerLeft=document.createElement("div"),innerRigth=document.createElement("div");function preventDefault(e){e=e||window.event}function movePage(e){isScrolling||(isScrolling=!0,animatePages(pages,e,function(){isScrolling=!1}))}function preventDefaultForScrollKeys(e){switch(e.keyCode){case 37:movePage(!1);break;case 39:movePage(!0);break;case 38:case 40:return preventDefault(e),!1}}function animatePages(e,t,n){var i,a=1,r=pageWidth;function o(){t?r<1?(n(),e[currentPage+1].style.left="0px",currentPage+=1):(r-=r/8,e[currentPage+1].style.left=r+"px",requestAnimationFrame(o)):pageWidth<=a?(n(),currentPage-=1):(a+=20,e[currentPage].style.left=a+"px",requestAnimationFrame(o))}i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.requestAnimationFrame=i,0==currentPage&&t?requestAnimationFrame(o):currentPage!=e.length-1||t?0<currentPage&&currentPage<e.length-1?requestAnimationFrame(o):n():requestAnimationFrame(o)}function swipedetect(e,t){var n,i,a,r,o,c,d=e,l=t||function(e){};d.addEventListener("touchstart",function(e){var t=e.changedTouches[0];n="none",i=t.pageX,a=t.pageY,c=(new Date).getTime()},!1),d.addEventListener("touchmove",function(e){1==e.changedTouches.length&&10<Math.abs(e.changedTouches[0].pageX-i)&&e.preventDefault()}),d.addEventListener("touchend",function(e){var t=e.changedTouches[0];r=t.pageX-i,o=t.pageY-a,(new Date).getTime()-c<=2e3&&(10<=Math.abs(r)&&Math.abs(o)<=1e3?n=r<0?"left":"right":10<=Math.abs(o)&&Math.abs(r)<=1e3&&(n=o<0?"up":"down")),l(n),e.preventDefault()},!1)}leftControll.classList.add("scb-left"),innerLeft.id="lb",innerLeft.classList.add("scb-arrows"),innerLeft.classList.add("left"),leftControll.appendChild(innerLeft),rigthControll.classList.add("scb-right"),innerRigth.id="rb",innerRigth.classList.add("scb-arrows"),innerRigth.classList.add("right"),rigthControll.appendChild(innerRigth),child.appendChild(leftControll),child.appendChild(rigthControll),child.style.paddingRight=whiteSpace+"px",child.setAttribute("style","width:"+(child.clientWidth+whiteSpace)+"px;"),window.onresize=function(){pageWidth=window.innerWidth;for(var e=0;e<pages.length;e++)0<pages[e].offsetLeft&&(pages[e].style.left=pageWidth+"px")},swipedetect(parent,function(e){switch(e){case"right":movePage(!1);break;case"left":movePage(!0)}}),window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,document.onkeydown=preventDefaultForScrollKeys;var before=document.getElementById("lb"),next=document.getElementById("rb");next.addEventListener("click",function(){movePage(!0)}),before.addEventListener("click",function(){movePage(!1)});